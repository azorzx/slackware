======================
Linux From Slack HOWTO (c) Nicolas Kovacs <info@microlinux.fr>
======================

Dernière révision : 30 novembre 2014

Ce HOWTO décrit l'installation d'un système Slackware 14.1 extrêmement
minimaliste.


Introduction
------------

L'objectif de ce HOWTO est de vous faire bâtir un système Linux Slackware
couche par couche, en dégageant pour chaque fonctionnalité le lot de paquets
nécessaires et en détaillant le rôle respectif de ceux-ci. 

Au-delà de l'intérêt pédagogique de la démarche, ce document peut également
servir de guide aux administrateurs chevronnés qui souhaitent constituer une
bonne base minimaliste pour personnaliser leur système. 

Certaines distributions comme CentOS, Debian, Arch, Crux, Gentoo, LFS, etc.
permettent assez facilement d'installer un système de base relativement
réduit, pour ensuite ajouter successivement les composants dont on peut avoir
besoin pour une configuration spécifique : serveur Web, serveur mail, station
de travail, poste de travail léger, etc.

La distribution Slackware est organisée différemment, et ses groupes de
paquets mélangent pêle-mêle les composants requis par un système minimal avec
ceux que l'on choisirait pour une configuration plus spécifique. La politique
standard de Slackware requiert plus ou moins explicitement l'installation "à
la louche" des différents groupes de paquets, à plus forte raison que la
distribution ne dispose pas de résolveur automatique de dépendances. 

Ceci étant dit, il est bien évidemment possible de configurer un système de
base réduit tout comme dans les distributions citées ci-dessus, et c'est ce
que nous nous proposons de faire. 


Le minimum syndical
-------------------

Dans un premier temps, nous allons tenter d'installer un système réduit au
possible. Ce système doit pouvoir faire les trois choses suivantes :

  1. Démarrer en mode console.
  
  2. Permettre à l'utilisateur root de se connecter.

  3. Permettre l'installation de paquets fournis sur un CD-Rom ou un DVD.

Et c'est tout. Pas de réseau ni de connexion à distance, pas d'outils de
développement, pas de pages man et info, et juste la poignée de commandes de
base pour effectuer le minimum syndical. Nous ajouterons tout ceci par la
suite. Pour l'instant, voici la liste des paquets qu'il nous faut :

  * a/aaa_base
  * a/aaa_elflibs
  * a/aaa_terminfo
  * a/bash
  * a/bin
  * a/bzip2
  * a/coreutils
  * a/cxxlibs
  * a/devs
  * a/e2fsprogs
  * a/elvis
  * a/etc
  * a/file
  * a/findutils
  * a/glibc-solibs
  * a/glibc-zoneinfo
  * a/grep
  * a/gzip
  * a/kbd
  * a/kernel-firmware
  * a/kernel-huge
  * a/kernel-huge-smp
  * a/kernel-modules
  * a/kernel-modules-smp
  * a/kmod
  * a/lilo
  * a/pkgtools
  * a/procps
  * a/sed
  * a/shadow
  * a/sysvinit
  * a/sysvinit-functions
  * a/sysvinit-scripts
  * a/tar
  * a/udev
  * a/util-linux
  * a/which
  * a/xz

[Description de la procédure d'installation manuelle.]

[Description de l'installation en utilisant les tagfiles.]


Le rôle des paquets
-------------------

La soupe alphabétique de paquets de 'aaa_base' jusqu'à 'xz' n'est pas très
parlante. Voici donc un petit topo qui essaie de détailler le rôle de chacun
des paquets dans notre système minimal.

  * aaa_base : arborescence du système

  * aaa_elflibs : collection de bibliothèques de base requises par beaucoup
    de logiciels

  * aaa_terminfo : descriptions de terminaux, requises pour en utiliser un

  * bash : l'interpréteur de commandes Bourne Again Shell

  * bin : collection d'utilitaires communément utilisés par les scripts
    système

  * bzip2 : commandes pour compresser et décompresser des données au format
    éponyme

  * coreutils : collection de commandes de base, en particulier toutes celles
    qui ont trait à la gestion des fichiers et répertoires

  * cxxlibs : bibliothèques assurant la compatibilité des applications liées
    à de plus anciennes versions de la bibliothèque standard C++ avec celle
    utilisée par le système

  * devs : peuple le répertoire '/dev', qui contient les points d'accès entre
    le système et le matériel

  * e2fsprogs : outils de gestion des systèmes de fichiers ext2, ext3 et ext4

  * elvis : éditeur de fichiers par défaut sous Slackware

  * etc : fichiers de configuration du système

  * file : contient un outil pour déterminer le type d'un fichier ou des
    fichiers donnés

  * findutils : programmes de recherche de fichiers

  * glibc-solibs : bibliothèques C partagées du système, contenant les
    routines essentielles à son fonctionnement

  * glibc-zoneinfo : permet de configurer le fuseau horaire de la machine

  * grep : programme de recherche de chaînes de caractères à l'intérieur de
    fichiers

  * gzip : programmes de compression et décompression de fichiers

  * kbd : contient les fichiers de tables de caractères, les polices de la
    console et des outils pour le clavier

  * kernel-firmware : firmwares permettant de gérer certains matériels et
    distribués séparément du reste du noyau

  * kernel-huge-* : le noyau par défaut de l'installation, avec le support des
    systèmes de fichiers

  * kernel-modules-* : les modules associés aux noyaux

  * kmod : contient des bibliothèques et des outils pour charger des modules
    du noyau

  * lilo : chargeur de démarrage

  * pkgtools : outils de gestion des paquets Slackware

  * procps : contient des programmes pour afficher des informations sur les
    processus en cours d'exécution

  * sed : éditeur de flux

  * shadow : stocke les mots de passe des utilisateurs sous forme cryptée

  * sysvinit* : contrôle du démarrage, de l'exécution et de l'arrêt du système

  * tar : programme d'archivage

  * udev : programmes pour la création dynamique de fichiers de périphérique

  * util-linux : collection d'utilitaires nécessaires au fonctionnement d'un
    système Linux

  * which : affiche le chemin complet d'une commande installée dans le PATH

  * xz : programmes de compression et de décompression de fichiers



Installation
------------

Pour éviter la corvée de sélectionner manuellement chaque paquet, la méthode
d'installation recommandée est d'utiliser la collection de tagfiles fournis.
Il s'agit là d'une série de fichiers au format texte simple, censés
automatiser le processus de sélection des paquets, un peu comme une version
simplifiée des fichiers Kickstart de Red Hat Enterprise Linux.

Démarrez sur le support d'installation de Slackware (DVD, premier CD-Rom, clé
USB). Sélectionnez votre disposition clavier, connectez-vous en tant que root
et partitionnez le disque dur, mais ne démarrez pas encore l'installateur.

Activez le réseau, par exemple :

  root@slackware:/# dhcpcd eth0 

L'environnement d'installation Slackware fournit déjà un répertoire '/tag'
vide, censé recevoir un jeu de tagfiles. On va donc l'utiliser.

  # cd /tag 

Téléchargez les tagfiles depuis le serveur :

  # wget http://www.microlinux.fr/slackware/stripslack-14.1/tagfiles.tar.gz 

Décompressez l'archive téléchargée :

  # tar xvzf tagfiles.tar.gz 

Le répertoire '/tag' contient à présent une série de répertoires qui
correspondent aux jeux de paquets Slackware :

  # ls 
  a/ ap/ d/ e/ f/ k/ kde/ kdei/ l/ n/ t/ tcl/ x/ xap/ xfce/ y/

Lancez l'installateur Slackware :

  # setup 

PACKAGE SERIES SELECTION : confirmez la sélection de paquets par défaut, étant
donné que les tagfiles vont prendre le dessus et se charger de la sélection
des paquets. 

SELECT PROMPTING MODE : tagpath - Utiliser un jeu de tagfiles personnalisés.

Path to tagfiles : /tag

À partir de là, procédez comme à l'accoutumée.


Premier redémarrage
-------------------

Voici ce que l'on peut faire après le redémarrage initial :

  1. Choisir un miroir de téléchargement pour 'slackpkg'.

  2. Effectuer la mise à jour initiale.

  3. Construire un initrd.

  4. Basculer vers le noyau GENERIC.


Élaguer une installation existante
----------------------------------

Le script 'scriptslack.sh' peut se charger d'élaguer un système Slackware
Linux existant. Il utilise 'slackpkg', qui doit donc être configuré au
préalable :

  # cd stripslack-14.1
  # ./stripslack.sh

Attention, ce script écorche votre hamster à vif. :o)


Documentation
-------------

Le livre de la distribution "Linux From Scratch" :

  * http://www.linuxfromscratch.org/lfs/view/stable/

La traduction française de ce dernier :

  * http://www.fr.linuxfromscratch.org/view/lfs-stable/

L'article "Linux From Slack" du site Slackware-fr.org :

  * http://wiki.slackware-fr.org/installation:articles:linux_from_slack

La page "Minimal Slackware Installation" de Vincent Batts :

  * http://www.slackware.com/~vbatts/minimal/


------------------------------------------------------------------------------
# vim: syntax=txt
